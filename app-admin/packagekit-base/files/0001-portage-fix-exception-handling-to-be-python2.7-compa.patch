From 56a54a7bbf3b28546619a4d2b458ea50c3f5c3e9 Mon Sep 17 00:00:00 2001
From: Gilles Dartiguelongue <eva@gentoo.org>
Date: Sun, 6 Sep 2015 13:32:23 +0200
Subject: [PATCH 1/9] portage: fix exception handling to be python2.7+
 compatible

---
 backends/portage/portageBackend.py | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

diff --git a/backends/portage/portageBackend.py b/backends/portage/portageBackend.py
index dc72bd9..d4726b6 100755
--- a/backends/portage/portageBackend.py
+++ b/backends/portage/portageBackend.py
@@ -1542,9 +1542,10 @@ class PackageKitPortageBackend(PackageKitPortageMixin, PackageKitBaseBackend):
         if not enable and self._is_repo_enabled(installed_layman_db, repoid):
             try:
                 installed_layman_db.delete(installed_layman_db.select(repoid))
-            except Exception, e:
+            except Exception as exc:
                 self.error(ERROR_INTERNAL_ERROR,
-                           "Failed to disable repository " + repoid + " : " + str(e))
+                           "Failed to disable repository %s: %s" %
+                           (repoid, str(exc)))
                 return
 
         # enabling (adding) a db
@@ -1555,10 +1556,11 @@ class PackageKitPortageBackend(PackageKitPortageMixin, PackageKitBaseBackend):
                 self._block_output()
                 installed_layman_db.add(available_layman_db.select(repoid))
                 self._unblock_output()
-            except Exception, e:
+            except Exception as exc:
                 self._unblock_output()
                 self.error(ERROR_INTERNAL_ERROR,
-                           "Failed to enable repository " + repoid + " : " + str(e))
+                           "Failed to enable repository %s: %s" %
+                           (repoid, str(exc)))
                 return
 
     def resolve(self, filters, pkgs):
-- 
2.6.3

