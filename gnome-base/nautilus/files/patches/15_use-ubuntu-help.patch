Description:  Use pre-installed Ubuntu Desktop Guide instead of GNOME help when
 running Unity
Forwarded: Not needed
Author: Jeremy Bicha <jbicha@ubuntu.com>

Index: nautilus-3.18.1/src/nautilus-properties-window.c
===================================================================
--- nautilus-3.18.1.orig/src/nautilus-properties-window.c
+++ nautilus-3.18.1/src/nautilus-properties-window.c
@@ -2918,7 +2918,11 @@ create_basic_page (NautilusPropertiesWin
 	GtkWidget *volume_usage;
 	GtkWidget *hbox, *vbox;
 
-	hbox = create_page_with_hbox (window->details->notebook, _("Basic"),
+	if (!g_strcmp0(g_getenv("XDG_CURRENT_DESKTOP"), "Unity"))
+		hbox = create_page_with_hbox (window->details->notebook, _("Basic"),
+				      "help:ubuntu-help/nautilus-file-properties-basic");
+	else
+		hbox = create_page_with_hbox (window->details->notebook, _("Basic"),
 				      "help:gnome-help/nautilus-file-properties-basic");
 	
 	/* Icon pixmap */
@@ -4253,10 +4257,16 @@ create_permissions_page (NautilusPropert
 	char *file_name, *prompt_text;
 	GList *file_list;
 
-	vbox = create_page_with_vbox (window->details->notebook,
+	if (!g_strcmp0(g_getenv("XDG_CURRENT_DESKTOP"), "Unity"))
+		vbox = create_page_with_vbox (window->details->notebook,
+				      _("Permissions"),
+				      "help:ubuntu-help/nautilus-file-properties-permissions");
+	else
+		vbox = create_page_with_vbox (window->details->notebook,
 				      _("Permissions"),
 				      "help:gnome-help/nautilus-file-properties-permissions");
 
+
 	file_list = window->details->original_files;
 
 	window->details->initial_permissions = NULL;
@@ -4557,7 +4567,11 @@ create_open_with_page (NautilusPropertie
 	g_free (mime_type);
 	g_list_free (files);
 
-	g_object_set_data_full (G_OBJECT (vbox), "help-uri", g_strdup ("help:gnome-help/files-open"), g_free);
+	if (!g_strcmp0(g_getenv("XDG_CURRENT_DESKTOP"), "Unity"))
+		g_object_set_data_full (G_OBJECT (vbox), "help-uri", g_strdup ("help:ubuntu-help/files-open"), g_free);
+	else
+		g_object_set_data_full (G_OBJECT (vbox), "help-uri", g_strdup ("help:gnome-help/files-open"), g_free);
+
 	gtk_notebook_append_page (window->details->notebook, 
 				  vbox, gtk_label_new (_("Open With")));
 	gtk_container_child_set (GTK_CONTAINER (window->details->notebook),
Index: nautilus-3.18.1/src/nautilus-application-actions.c
===================================================================
--- nautilus-3.18.1.orig/src/nautilus-application-actions.c
+++ nautilus-3.18.1/src/nautilus-application-actions.c
@@ -87,7 +87,14 @@ action_help (GSimpleAction *action,
 	GError *error = NULL;
 
 	window = gtk_application_get_active_window (application);
-	gtk_show_uri (window ? 
+	if (!g_strcmp0(g_getenv("XDG_CURRENT_DESKTOP"), "Unity"))
+		gtk_show_uri (window ? 
+		      gtk_window_get_screen (GTK_WINDOW (window)) :
+		      gdk_screen_get_default (),
+		      "help:ubuntu-help/files",
+		      gtk_get_current_event_time (), &error);
+	else
+		gtk_show_uri (window ? 
 		      gtk_window_get_screen (GTK_WINDOW (window)) :
 		      gdk_screen_get_default (),
 		      "help:gnome-help/files",
